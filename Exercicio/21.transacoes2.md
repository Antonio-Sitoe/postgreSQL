Exercício 11 — Atualização Condicional de Saldo

Contexto: Atualizar saldo de uma conta apenas se o valor não gerar saldo negativo.
Objetivo: Garantir integridade financeira usando transações.
Tabelas envolvidas: conta
Tarefa:

Inicie uma transação.

Subtraia um valor do saldo de uma conta.

Se o saldo ficar negativo, faça rollback; caso contrário, commit.

Exercício 12 — Inserção de Cliente com Múltiplos Contactos

Contexto: Adicionar um cliente e associar 2 contactos em uma única transação.
Objetivo: Garantir atomicidade ao inserir em duas tabelas relacionadas.
Tabelas envolvidas: cliente, contacto
Tarefa:

Inicie uma transação.

Insira um cliente.

Insira dois contactos vinculados ao cliente.

Se algum contacto falhar, faça rollback; caso contrário, commit.

Exercício 13 — Registro de Pagamento Parcial

Contexto: Registrar pagamento parcial de um lançamento.
Objetivo: Atualizar a tabela lancamento e o saldo da conta simultaneamente.
Tabelas envolvidas: lancamento, conta
Tarefa:

Inicie uma transação.

Atualize o valor do lançamento subtraindo o pagamento parcial.

Atualize o saldo da conta.

Commit se tudo ocorrer corretamente; rollback caso o valor seja inválido.

Exercício 14 — Cancelamento de Lançamento

Contexto: Um lançamento foi registrado incorretamente e precisa ser cancelado.
Objetivo: Remover o lançamento e reverter impacto no saldo da conta.
Tabelas envolvidas: lancamento, conta
Tarefa:

Inicie uma transação.

Delete o lançamento incorreto.

Atualize o saldo da conta subtraindo/adicionando o valor revertido.

Commit se não houver inconsistências; rollback se houver.

Exercício 15 — Transferência Entre Contas com Limite

Contexto: Transferência só pode ocorrer se a conta de origem tiver saldo suficiente.
Objetivo: Implementar validação dentro de uma transação.
Tabelas envolvidas: conta
Tarefa:

Inicie uma transação.

Verifique o saldo da conta de origem.

Se houver saldo suficiente, subtraia da conta de origem e adicione à conta de destino.

Commit ou rollback conforme validação.

Exercício 16 — Atualização em Massa de Clientes

Contexto: Atualizar a situação de todos os clientes inativos sem lançamentos pendentes.
Objetivo: Demonstrar transações com múltiplas linhas e validação de regras.
Tabelas envolvidas: cliente, lancamento
Tarefa:

Inicie uma transação.

Atualize situacao para 'INATIVO' apenas para clientes sem lançamentos pendentes.

Commit se tudo estiver correto; rollback se algum cliente inválido for afetado.

Exercício 17 — Parcelamento de Lançamento

Contexto: Dividir um lançamento em múltiplas parcelas.
Objetivo: Inserir todas as parcelas como uma transação atômica.
Tabelas envolvidas: lancamento
Tarefa:

Inicie uma transação.

Insira 3 parcelas do mesmo lançamento, cada uma com valor proporcional.

Commit se todas forem inseridas; rollback se alguma falhar.

Exercício 18 — Atualização de Categoria com Verificação de Débito/Crédito

Contexto: Alterar a coluna debito e credito de uma categoria sem violar regras do sistema.
Objetivo: Demonstrar transações condicionais com validação de regras.
Tabelas envolvidas: categoria
Tarefa:

Inicie uma transação.

Altere debito e credito de uma categoria.

Se violar alguma regra de negócio (ex.: debito = false e credito = false), faça rollback; caso contrário, commit.

Exercício 19 — Registro de Pagamentos de Múltiplos Clientes

Contexto: Atualizar o status de pagamentos de vários clientes de uma vez.
Objetivo: Garantir que todos os lançamentos sejam pagos juntos ou nenhum.
Tabelas envolvidas: lancamento
Tarefa:

Inicie uma transação.

Atualize situacao para 'PAGO' de todos os lançamentos selecionados.

Commit se todos forem atualizados; rollback se algum falhar.

Exercício 20 — Ajuste de Saldo com Backup

Contexto: Ajustar saldo de conta com backup de segurança antes da alteração.
Objetivo: Demonstrar transações com backup temporário.
Tabelas envolvidas: conta
Tarefa:

Inicie uma transação.

Salve o saldo atual em uma variável temporária ou tabela de log.

Atualize o saldo.

Commit se tudo estiver correto; rollback se algum erro ocorrer.
